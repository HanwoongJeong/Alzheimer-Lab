실행방법

>pyhton pet_augmentation_xml.py

==> mode setting  방법
A) 코드 안의 아래 항목을 변경한다.
B) 설정 파일의 항목을 변경한다.
   동일 폴더에 pet_augmentation_xml.cfg 가 있으면 이 설정이 우선임

----------------------------------------------
A) 코드 안의 설정 항목
----------------------------------------------
debug = 0      0:결과만 출력 2:과정 출력
mode=1         0:생생될 데이타 갯수만 계산   1: 데이터 생성
using_xml=0    0:없을 때  1:세그멘테이션용 xml파일 있을 때
wantednum=0    #생성되기 원하는 파일 수,  특별히 원하지 않으면 0, 
                100으로 지정시 -생성이 500개 되면 400개를 삭제하고 100개만 남김
usingfilenum=0  #0:파일 개수 모를때,  만일 100개중 50개만 사용하고 싶으면 50
grey_img = 1    # 1:영상이 단색이면 1, 0: 컬러면
data_dir = '/home/turbo/share/sda1/data/origin/1gr'  #소스 이미지 폴더 - 해당 폴더의 모든 이미지 파일이 대상이 
out_dir = '/home/turbo/share/sda1/data/origin/out'   #새로 생생된 이미지 저장할 폴더

make_option=[0,1,0,0,0,0,0]   #0번째는 무시 , 0이상 숫자면 셋팅된 걸로
# make_option=[0,0,0,0,0,0]   #아무 것도 선택 안됨
# make_option=[0,1,0,0,0,0,0] #이미지 크기 조절 resize   (noise_option, light_option으로 추가 가능)
# make_option=[0,0,2,0,0,0,0] #이미지 일정 부분 자르기 crop (noise_option, light_option으로 추가 가능)
# make_option=[0,0,0,3,0,0,0] #이미지 회전 ratate (noise_option, light_option으로 추가 가능)
# make_option=[0,0,0,0,4,0,0] #이미지 flip (noise_option, light_option으로 추가 가능)
# make_option=[0,0,0,0,0,5,0] #잡음 noise  (단순히 잡음만 추가)
# make_option=[0,0,0,0,0,0,6] #밝기 light  (단순히 밝기만 추가)
# make_option=[0,1,2,3,4,5,6] #모두 선택

make_option_sub=[
    [0, 0, 0, 0, 0, 0, 0], #0   0번째는 무시
    [0, 4, 0, 0, 0, 0, 0], #1   1번째만 의미 있음(나머지는 0) : 1,2,3,4에 따라 rate가 조정되어 생성되는 파일 개수가 늘어남
    [0, 0, 4, 0, 0, 0, 0], #2   2번째만 의미 있음(나머지는 0) : 1,2,3,4에 따라 rate가 조정되어 생성되는 파일 개수가 늘어남
    [0, 0, 0, 4, 0, 0, 0], #3   3번째만 의미 있음(나머지는 0) : 1,2,3,4에 따라 rate가 조정되어 생성되는 파일 개수가 늘어남
    [0, 0, 0, 0, 4, 0, 0], #4   4번째만 의미 있음(나머지는 0) : 1,2,3,4에 따라 rate가 조정되어 생성되는 파일 개수가 늘어남
    [0, 0, 0, 0, 0, 4, 0], #5   5번째만 의미 있음(나머지는 0) : 1,2,3,4에 따라 rate가 조정되어 생성되는 파일 개수가 늘어남
    [0, 0, 0, 0, 0, 0, 4]  #6   6번째만 의미 있음(나머지는 0) : 1,2,3,4에 따라 rate가 조정되어 생성되는 파일 개수가 늘어남
]
noise_option=[
    [0,0],  #0번째는 무시
    [0,90], #1 make_option 1에 적용 : [0,0]이면 noise 포함 안함,  [0,90]:0-90% 사이의  noise 적용
    [0,90], #2 make_option 2에 적용 : [0,0]이면 noise 포함 안함,  [0,90]:0-90% 사이의  noise 적용
    [0,90], #3 make_option 3에 적용 : [0,0]이면 noise 포함 안함,  [0,90]:0-90% 사이의  noise 적용
    [0,90]  #4 make_option 4에 적용 : [0,0]이면 noise 포함 안함,  [0,90]:0-90% 사이의  noise 적용
]
light_option=[
    [0,0],  #0번째는 무시
    [0,100],  #1 make_option 1에 적용 : [0,0]이면 light 포함 안함,  [0,100]:0-100% 사이의  light 적용
    [0,100],  #2 make_option 1에 적용 : [0,0]이면 light 포함 안함,  [0,100]:0-100% 사이의  light 적용
    [0,100],  #3 make_option 1에 적용 : [0,0]이면 light 포함 안함,  [0,100]:0-100% 사이의  light 적용
    [0,100]   #4 make_option 1에 적용 : [0,0]이면 light 포함 안함,  [0,100]:0-100% 사이의  light 적용
]

==> make_option 별 생생될 데이터 특성과 rate별 생성 데이타 수

#======================================================
#1) Scaling  : 이미지 크기 조절
#======================================================
    Min_scale, Max_scale = 88, 110  # make_option 1 (이미지 크기 조절)에 사용, 88 - 110% 로 크기 조절
    # rate별 생성 데이타 수
    #  1   2    3   4  - rate
    #  2   4    6   8  - basic
    #  6  12   24  40  - noise, no light 3 3 4 5
    #  6  16   24  40  - no noise, light 3 4 4 5
    # 12  28   48  80  - nose + light
#======================================================
# 2)Translation : 잘라내기 ,crop
#======================================================
    Min_scale, Max_scale = 96, 100  # make_option 2 (잘라낼 이미지 portion 조절)에 사용, 96 - 100% 로 크기 조절
    # rate별 생성 데이타 수
    #   1    2    3    4  - rate
    #   8   16   24   32  - basic
    #  24   48   96  160  - noise, no light 3 3 4 5
    #  24   64   96  160  - no noise, light 3 4 4 5
    #  48  112  192  320  - nose + light
#======================================================
# 3)Rotation (at finer angles)  : 회전
#======================================================
    # make_option 3 (각도 조절에 사용, -10 -  10도로 크기 조절
    # rate별 생성 데이타 수
    #   1   2    3    4  - rate
    #   8  12   16   20  - no noise, light
    #  24  36   64  100  - noise, no light 3 3 4 5
    #  24  48   64  100  - no noise, light 3 4 4 5
    #  48  84  128  200  - nose + light
#======================================================
#4) Flip  : 상하,좌우 반전 이미지
#======================================================
    # make_option 4 (이미지 반전, rate: 1: 상하, 2:좌우 3,4:상하좌우 동시)
    # rate별 생성 데이타 수
    #  1   2    3   4  - rate
    #  1   2    3   3  - basic
    #  3   6   12  15  - noise, no light 3 3 4 5
    #  3   8   12  15  - no noise, light 3 4 4 5
    #  6  14   24  30  - nose + light
#======================================================
# 5)Noise : 단순 잡음 추가
#======================================================
    # rate별 생성 데이타 수
    #   1   2    3    4  - rate
    #   1   2    3    4  - basic
#======================================================
# 6)light : 단순 밝기 조절
#======================================================
    # rate별 생성 데이타 수
    #   1   2    3    4  - rate
    #   1   2    3    4  - basic



----------------------------------------------
B) pet_augmentation_xml.cfg 설정
----------------------------------------------
<mode>   #0:생생될 데이타 갯수만 계산   1: 데이터 생성
1
<xml>    #0:없을 때  1:세그멘테이션용 xml파일 있을 때
0
<data_dir> #소스 이미지 폴더 - 해당 폴더의 모든 이미지 파일이 대상이 아니라 <files>에 목록만 대상이 됨
/home/turbo/share/sda1/data/origin/1gr
<out_dir>  #새로 생생된 이미지 저장할 폴더
/home/turbo/share/sda1/data/origin/out
<target_outfile_num>   #생성되기 원하는 파일 수,  특별히 원하지 않으면 0, 
0
<options> #2열은 make_option에 해당 , 0이상을 입력하면 해당 행의 속성에 따라  데이터 생성
# 3,4열은  [0,0]이면 noise 포함 안함,  [0,90]:0-90% 사이의  noise 적용
# 5,6열은  [0,0]이면 light 포함 안함,  [0,100]:0-100% 사이의  light 적용
1 0 4 0 90 0 100
2 0 4 0 90 0 100
3 0 4 0 90 0 100
4 1 4 0 90 0 100
5 0 4
6 0 4
<files>
1gr_44_0001.jpg
1gr_45_0001.jpg
1gr_46_0001.jpg
<using_file_num>  #<data_dir>내의 이미지 파일 중 사용할 개수 지정
3

   
